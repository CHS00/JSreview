<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // 애플리케이션 : blue,안녕하세요 와 같이 저장하도록
        // -저장형식 "색,메세지"
        // -활용형식 {color:색,message:메세지}
        document.addEventListener("DOMContentLoaded",()=>{

            
            // 데이터 저장
            const save = (data)=>{
                localStorage.setItem(
                    // "애플리케이션",`${data.color},${data.message}`
                    "애플리케이션",JSON.stringify(data)
                )
            }
            
            const load = ()=>{
                // 데이터 불러오기
                const data = localStorage.getItem("애플리케이션");
                if (data!==null) {
                    // const [color,message] = data.split(",")
                    return JSON.parse(data)
                }else{
                    return{
                        color:"red",
                        message:""
                    }
                }
            }

            const p = document.querySelector("p");
            const button = document.querySelector("button")
            const input = document.querySelector("input")

            button.addEventListener("click",()=>{
                data.color="red"
                data.message = ""
                save(data);

                select.value = "red"
                input.value=""
            })
            
            input.addEventListener("keyup",()=>{
                data.message = input.value;
                save(data)
            })

            const data = load()

            input.value = data.message;

            p.textContent = `이전실행때의 마지막 값 :${data.message}`
            

            const select = document.querySelector("select")

                document.body.style.backgroundColor = data.color;
                select.value = data.color;


            select.addEventListener("change",()=>{
                const color = select.options[select.selectedIndex].value;
                document.body.style.backgroundColor = color;

                // 데이터 저장
                data.color=color;
                save(data)
            })

        })
    </script>
</head>
<body>
    <p></p>
    <button>지우기</button>
    <input type="text">
    <hr>
    드롭다운 - 옵션: 색상 - 페이지의 배경색 변경 - 저장
    <br>
    <select name="" id="">
        <option value="red">빨강</option>
        <option value="blue">파랑</option>
        <option value="green">초록</option>
    </select>
</body>
</html>